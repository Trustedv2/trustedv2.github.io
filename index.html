<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrustedV2 Forum</title>
</head>
<body>

<div id="main-content" style="display: none;">
    <h1>TrustedV2 Forum</h1>
    <p>Welcome to the website where you see forum pages</p>
    <p id="random-id"></p>
    <button id="guest-login-btn" style="background-color: grey; color: black;">Guest Login</button>
</div>

<div id="offline" style="display: none;">
    <h1>The server is offline. We will be back online soon.</h1>
</div>

<div id="loading">
    <h1>Loading Screen</h1>
    <p>Connecting to Server...</p>
</div>

<style>
    body {
        background-color: white;
    }
    h1 {
        color: black;
    }
    p {
        color: black;
    }
    #loading {
        text-align: center;
        font-size: 20px;
        color: blue;
    }
</style>

<script>
// Hardcoded maintenance mode flag (Set this to true or false manually)
const maintenanceMode = false; // Change to 'true' to activate maintenance mode

// Toggle Maintenance Screen based on the mode
if (maintenanceMode) {
    document.getElementById("main-content").style.display = 'none';  // Hide main content
    document.getElementById("offline").style.display = 'block';  // Show maintenance screen
} else {
    document.getElementById("main-content").style.display = 'none';  // Hide main content initially
    document.getElementById("offline").style.display = 'none';  // Hide maintenance screen
}

// Function to generate a random 5-digit ID
function generateRandomId() {
    return Math.floor(Math.random() * 90000) + 10000; // 5 digits between 10000 and 99999
}

// Simulate server connection delay (using setTimeout)
setTimeout(function() {
    // Hide the loading screen and show the main content
    document.getElementById("loading").style.display = 'none';
    document.getElementById("main-content").style.display = 'block';

    // Generate a random ID and display it
    const randomId = generateRandomId();
    document.getElementById('random-id').textContent = `Your Guest ID: ${randomId}`;

    // Add functionality to the "Guest Login" button
    document.getElementById('guest-login-btn').addEventListener('click', function() {
        alert(`Welcome, Guest ID: ${randomId}`);
    });
}, 3000); // Simulate 3 seconds of loading time

// Initializing local storage for users
        if (!localStorage.getItem("users")) {
            localStorage.setItem("users", JSON.stringify([])); // Empty users list initially
        }

        // Show Register Form
        function showRegisterForm() {
            document.getElementById("login-screen").classList.add("hidden");
            document.getElementById("register-screen").classList.remove("hidden");
        }

        // Show Login Form
        function showLoginForm() {
            document.getElementById("register-screen").classList.add("hidden");
            document.getElementById("login-screen").classList.remove("hidden");
        }

        // Handle Login Logic
        function login() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            const users = JSON.parse(localStorage.getItem("users"));
            
            const user = users.find(user => user.username === username && user.password === password);
            
            if (user) {
                localStorage.setItem("loggedInUser", JSON.stringify(user));
                showMainContent();
            } else {
                alert("Invalid login credentials.");
            }
        }

        // Handle Account Creation
        function createAccount() {
            const username = document.getElementById("register-username").value;
            const password = document.getElementById("register-password").value;

            if (password.length < 8) {
                alert("Password must be at least 8 characters long.");
                return;
            }

            const users = JSON.parse(localStorage.getItem("users"));
            const existingUser = users.find(user => user.username === username);
            
            if (existingUser) {
                alert("Username already taken.");
                return;
            }

            const newUser = { username, password };
            users.push(newUser);
            localStorage.setItem("users", JSON.stringify(users));
            alert("Account created successfully.");
            showLoginForm();
        }

        // Show Main Content after Login
        function showMainContent() {
            const user = JSON.parse(localStorage.getItem("loggedInUser"));
            document.getElementById("logged-in-user").textContent = user.username;
            
            document.getElementById("login-screen").classList.add("hidden");
            document.getElementById("main-content").classList.remove("hidden");
        }

        // Handle Create Post
        function createPost() {
            const title = document.getElementById("post-title").value;
            const content = document.getElementById("post-content").value;

            if (!title || !content) {
                alert("Please provide a title and content for the post.");
                return;
            }

            alert("Post created successfully!");
            // For now, we just alert and reset fields. Later, we can add code to store posts.
        }

        // Handle Chat Messages
        function sendMessage() {
            const username = document.getElementById("chat-username").value;
            const message = document.getElementById("chat-message").value;

            if (!username || !message) {
                alert("Please enter a username and a message.");
                return;
            }

            const chatMessagesDiv = document.getElementById("chat-messages");
            const newMessage = document.createElement("p");
            newMessage.textContent = `${username}: ${message}`;
            chatMessagesDiv.appendChild(newMessage);
            
            // Clear input fields after sending the message
            document.getElementById("chat-username").value = '';
            document.getElementById("chat-message").value = '';
        }
</script>
</body>
</html>
